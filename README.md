# Telegram Companion ‚Äî –±–æ—Ç-—Å–∞–º–º–∞—Ä–∏–∑–∞—Ç–æ—Ä

–≠–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è: –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã, –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–∏–¥–µ–æ –∏ **–¥–∞–∂–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ/–∞—É–¥–∏–æ** –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –≤—ã–∂–∏–º–∫–∏.  
üî• –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **Llama 3.3 70B (Groq)** –¥–ª—è —Å–∞–º–º–∞—Ä–∏ –∏ **Whisper large v3 (Groq)** –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–¢–µ–∫—Å—Ç—ã –∏ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å—É—Ç–∏ –∏ –∫–ª—é—á–µ–≤—ã—Ö –ø—É–Ω–∫—Ç–æ–≤.
- **–°—Ç–∞—Ç—å–∏ –ø–æ —Å—Å—ã–ª–∫–µ** ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Å—É–º–º–∏—Ä—É–µ–º.
- **YouTube (–¥–æ ~2 —á–∞—Å–æ–≤)** ‚Äî —Å–∞–º–º–∞—Ä–∏ –ø–æ —Å—É–±—Ç–∏—Ç—Ä–∞–º –∏ –æ–ø–∏—Å–∞–Ω–∏—é.
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: PDF, DOCX, DOC, TXT *(–¥–æ ~20 MB)* ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ–∑—é–º–µ.
- **–ê—É–¥–∏–æ –∏ –≥–æ–ª–æ—Å–æ–≤—ã–µ** ‚Äî –∞–≤—Ç–æ-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è + –∫—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏.
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: MP3, WAV, M4A, OGG, FLAC, AAC, OPUS
  - –õ–∏–º–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –¥–æ **50 MB** –∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä **~1 —á–∞—Å** –∞—É–¥–∏–æ
- **–ì–∏–±–∫–∞—è –¥–ª–∏–Ω–∞ —Å–∞–º–º–∞—Ä–∏**: –∫–æ–º–∞–Ω–¥—ã `/10`, `/30`, `/50` –¥–ª—è 10% / 30% / 50%.
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: `/stats`
- **–°–ø—Ä–∞–≤–∫–∞**: `/help`
- **–Ø–∑—ã–∫–∏**: —Ä—É—Å—Å–∫–∏–π üá∑üá∫ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π üá¨üáß

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python 3.10+**
- **FFmpeg** (—Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `imageio-ffmpeg`)
- –ê–∫–∫–∞—É–Ω—Ç –≤ **Groq** –∏ –∫–ª—é—á API –¥–ª—è:
  - `llama-3.3-70b-versatile` (—Å–∞–º–º–∞—Ä–∏–∑–∞—Ü–∏—è)
  - `whisper-large-v3` (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ)

---

## üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª: `.env` (–ø—Ä–∏–º–µ—Ä —É–∂–µ –µ—Å—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)

```dotenv
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
GROQ_API_KEY=your_groq_api_key_here
DATABASE_URL=postgresql://...  # –∏–ª–∏ sqlite:///bot_database.db (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
LOG_LEVEL=INFO
MAX_REQUESTS_PER_MINUTE=10
MAX_TEXT_LENGTH=10000
MIN_TEXT_LENGTH=50
```

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PostgreSQL (–Ω–∞–ø—Ä–∏–º–µ—Ä, Railway —á–µ—Ä–µ–∑ DATABASE_URL) –∏–ª–∏ SQLite (—Ñ–∞–π–ª bot_database.db) ‚Äî —Å–º. database.py.

---

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É TelegramCompanion/.

2. –°–æ–∑–¥–∞–π—Ç–µ `.env` (–∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä):
```bash
pip install -U groq python-dotenv aiohttp aiofiles pydub imageio-ffmpeg validators beautifulsoup4 yt-dlp pdfplumber PyPDF2 python-docx chardet flask
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python3 -u main_entrypoint.py
```

5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start` –≤ Telegram.

6. HTTP-–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–ª–æ–∫–∞–ª—å–Ω–æ): `GET /healthz` –≤–µ—Ä–Ω—ë—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞.

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YouTube –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)

‚ö†Ô∏è **–î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å YouTube –≤–∏–¥–µ–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cookies –±—Ä–∞—É–∑–µ—Ä–∞**

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ **Get cookies.txt** –¥–ª—è –≤–∞—à–µ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞:
- **Chrome**: [Get cookies.txt](https://chrome.google.com/webstore/detail/get-cookiestxt/njabckikapfpffapmjgojcnbfjonfjfg)
- **Firefox**: [cookies.txt](https://addons.mozilla.org/en-US/firefox/addon/cookies-txt/)

### –®–∞–≥ 2: –≠–∫—Å–ø–æ—Ä—Ç cookies
1. –û—Ç–∫—Ä–æ–π—Ç–µ [youtube.com](https://youtube.com) –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à YouTube/Google –∞–∫–∫–∞—É–Ω—Ç
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è **Get cookies.txt**
4. –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é "Export" –∏–ª–∏ "Download"
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª –∫–∞–∫ `cookies.txt`

### –®–∞–≥ 3: –†–∞–∑–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `cookies.txt` –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `main.py`).

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–∫–æ–π:**
```
project_root/
‚îú‚îÄ‚îÄ cookies.txt          ‚Üê –í–∞—à —Ñ–∞–π–ª —Å cookies
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ youtube_processor.py
‚îî‚îÄ‚îÄ ...
```

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- **–¢–æ–ª—å–∫–æ –Ω–∞—Å—Ç–æ—è—â–∏–µ cookies**: –¢–µ—Å—Ç–æ–≤—ã–µ –∏–ª–∏ –ø–æ–¥–¥–µ–ª—å–Ω—ã–µ cookies –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç - YouTube –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ cookies**: –ï—Å–ª–∏ –±–æ—Ç –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫–∏ "429 Too Many Requests" –∏–ª–∏ "Cookies –∏—Å—Ç–µ–∫–ª–∏", –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- **–í–æ–π–¥–∏—Ç–µ –≤ YouTube**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–æ–π–¥–∏—Ç–µ –≤ –≤–∞—à YouTube/Google –∞–∫–∫–∞—É–Ω—Ç –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º cookies
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –§–∞–π–ª `cookies.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –µ–≥–æ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º
- **–ë–µ–∑ cookies**: YouTube —Å—Å—ã–ª–∫–∏ –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—à–∏–±–∫—É "‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å cookies –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ YouTube —Å—Å—ã–ª–æ–∫"

---

## üß≠ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

- **–¢–µ–∫—Å—Ç** ‚Üí –ø—Ä–∏—à–ª–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –≤—ã–∂–∏–º–∫—É.
- **–°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—å—é** ‚Üí –≤–µ—Ä–Ω—ë–º –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ.
- **YouTube-—Å—Å—ã–ª–∫–∞** ‚Üí –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ —Å—É–±—Ç–∏—Ç—Ä–∞–º.
- **–î–æ–∫—É–º–µ–Ω—Ç (PDF/DOCX/DOC/TXT)** ‚Üí —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–∞–º–º–∞—Ä–∏.
- **–ì–æ–ª–æ—Å–æ–≤–æ–µ/–∞—É–¥–∏–æ** ‚Üí —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç + –∫—Ä–∞—Ç–∫–æ–µ —Å–∞–º–º–∞—Ä–∏.

### –ö–æ–º–∞–Ω–¥—ã

- `/10`, `/30`, `/50` ‚Äî —É—Ä–æ–≤–µ–Ω—å —Å–∂–∞—Ç–∏—è 10% / 30% / 50%
- `/help` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞
- `/stats` ‚Äî –≤–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

---

## üõ°Ô∏è –õ–∏–º–∏—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

- **–¢–µ–∫—Å—Ç**: –¥–æ 10 000 —Å–∏–º–≤–æ–ª–æ–≤
- **–ê—É–¥–∏–æ**: –¥–æ 50 MB, –æ—Ä–∏–µ–Ω—Ç–∏—Ä ~1 —á–∞—Å
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: –¥–æ ~20 MB
- **YouTube**: —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–æ ~2 —á–∞—Å–æ–≤
- **–†–µ–π—Ç-–ª–∏–º–∏—Ç**: 10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

(–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥/ENV, —Å–º. config.py.)

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ñ–∞–π–ª—ã)

- `simple_bot.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç, Telegram Bot API, –ø–∞—Ä—Å–∏–Ω–≥ –∞–ø–¥–µ–π—Ç–æ–≤.
- `smart_summarizer.py` ‚Äî –ª–æ–≥–∏–∫–∞ —Å–∞–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ (Llama 3.3 70B).
- `audio_processor.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è/—á—Ç–µ–Ω–∏–µ –∞—É–¥–∏–æ + Whisper.
- `file_processor.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF/DOCX/DOC/TXT).
- `youtube_processor.py` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–±—Ç–∏—Ç—Ä–æ–≤/–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (yt-dlp).
- `database.py` ‚Äî PostgreSQL/SQLite, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π.
- `main_entrypoint.py` ‚Äî –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ HTTP-health —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

## ‚ùì –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥

- **–ê—É–¥–∏–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ GROQ_API_KEY –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ffmpeg (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ imageio-ffmpeg).
- **–ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —á–∏—Ç–∞–µ–º—ã–π (PDF –Ω–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞).
- **–õ–∏–º–∏—Ç—ã**: —Å–Ω–∏–∑—å—Ç–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å/—Ä–∞–∑–º–µ—Ä –∏–ª–∏ —Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ —á–∞—Å—Ç–∏.

---

## üî• –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Groq Llama 3.3 70B** ‚Äî `llama-3.3-70b-versatile`
- **Groq Whisper large v3** ‚Äî `whisper-large-v3`
- Telegram Bot API (long polling), aiohttp, yt-dlp, pdfplumber, PyPDF2, beautifulsoup4, pydub, imageio-ffmpeg.
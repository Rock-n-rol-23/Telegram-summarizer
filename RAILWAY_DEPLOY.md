# üöÇ –î–µ–ø–ª–æ–π –Ω–∞ Railway

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

–ö–æ–¥ **—É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω** –≤ GitHub –Ω–∞ –≤–µ—Ç–∫—É `main` —Å –Ω–æ–≤–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç.

---

## üîß –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Railway

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Railway –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
```
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
OPENROUTER_API_KEY=–≤–∞—à_–∫–ª—é—á_openrouter
```

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ):**
```
GROQ_API_KEY=–≤–∞—à_–∫–ª—é—á_groq
ENABLE_GROQ_FALLBACK=true

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç)
DATABASE_URL=postgresql://...

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO

# –õ–∏–º–∏—Ç—ã
MAX_REQUESTS_PER_MINUTE=10
MAX_TEXT_LENGTH=10000
MIN_TEXT_LENGTH=50
```

### 2. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞

Railway –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∏–∑ `Procfile`:
```
python3 -u main.py
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ ‚Üí Deploy ‚Üí Start Command

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
```
python3 -u main.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

–ü–æ—Å–ª–µ –ø—É—à–∞ –≤ GitHub, Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–±–Ω–∞—Ä—É–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ó–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—É—é —Å–±–æ—Ä–∫—É
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt` –∏–ª–∏ `pyproject.toml`
4. –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞ —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

**–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ —Å–±–æ—Ä–∫–∏:**
- –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Å–µ—Ä–≤–∏—Å
- –í–∫–ª–∞–¥–∫–∞ "Deployments"
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π deployment
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üîç –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ

```
============================================================
–ó–∞–ø—É—Å–∫ Telegram Companion (Refactored Version)
============================================================
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è state manager...
‚úÖ OpenRouter –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
‚úÖ Groq –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤...
–°–æ–∑–¥–∞–Ω–∏–µ RefactoredBot...
–ó–∞–ø—É—Å–∫ RefactoredBot...
‚úÖ –í—Å–µ handlers –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: @your_bot_username
–ó–∞–ø—É—Å–∫ long polling...
```

---

## ‚ùå –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—à–∏–±–∫–∞: "No module named 'bot'"

**–†–µ—à–µ–Ω–∏–µ:**
Railway –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –µ—Å—Ç—å:
   - `main.py`
   - `bot/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
   - `requirements.txt`

2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Railway ‚Üí Deploy ‚Üí Root Directory –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ (–∏–ª–∏ `/`)

### –û—à–∏–±–∫–∞: "TELEGRAM_BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway:
1. Settings ‚Üí Variables
2. –î–æ–±–∞–≤—å—Ç–µ `TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω`
3. Redeploy

### –û—à–∏–±–∫–∞: "–ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∏ –æ–¥–∏–Ω LLM –∫–ª–∏–µ–Ω—Ç"

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω API –∫–ª—é—á:
```
OPENROUTER_API_KEY=sk-or-v1-...
```
–∏–ª–∏
```
GROQ_API_KEY=gsk_...
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –õ–æ–≥–∏ Railway - –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è?
2. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TELEGRAM_BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è?
3. –ë–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ –±—ã–ª —É–¥–∞–ª–µ–Ω –≤ @BotFather)?
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `/start` - –≤–æ–∑–º–æ–∂–Ω–æ –±–æ—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`** - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/help`** - –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–π—Ç–∏ —Å–ø—Ä–∞–≤–∫–∞
3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç (>50 —Å–∏–º–≤–æ–ª–æ–≤)** - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–∞–º–º–∞—Ä–∏
4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ YouTube —Å—Å—ã–ª–∫—É** - –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å—Å—è
5. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** - –¥–æ–ª–∂–Ω–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞—Ç—å—Å—è + —Å–∞–º–º–∞—Ä–∏

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Å–µ—Ä–≤–∏—Å
# –í–∫–ª–∞–¥–∫–∞ "Deployments" ‚Üí "View Logs"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–∞
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/stats` –±–æ—Ç—É - –ø–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## üîÑ –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è:

1. **–ß–µ—Ä–µ–∑ Railway UI:**
   - Deployments ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Å–ø–µ—à–Ω—ã–π deployment
   - –ù–∞–∂–º–∏—Ç–µ "Redeploy"

2. **–ß–µ—Ä–µ–∑ Git:**
   ```bash
   git revert HEAD
   git push origin main
   ```

**–ù–û:** –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (`simple_bot.py`) **–±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞**, –ø–æ—ç—Ç–æ–º—É –æ—Ç–∫–∞—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git.

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è - –æ–Ω–∞ –µ—Å—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏–∏:
```bash
git log --oneline | grep "simple_bot"
git checkout <commit_hash> simple_bot.py
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [ ] GitHub repository –æ–±–Ω–æ–≤–ª–µ–Ω (main –≤–µ—Ç–∫–∞)
- [ ] Railway –æ–±–Ω–∞—Ä—É–∂–∏–ª –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ù–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-10-03
**–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:** –°–º. [REFACTORING.md](REFACTORING.md) –∏ [REFACTORED_QUICKSTART.md](REFACTORED_QUICKSTART.md)

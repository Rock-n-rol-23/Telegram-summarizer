# –û—Ç—á–µ—Ç: –ü–µ—Ä–≤—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è –∞—É–¥–∏–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–µ—Ä–≤—ã–π –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram –±–æ—Ç–µ, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –Ω–∞ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—é —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞.

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∞—É–¥–∏–æ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤

–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `utils/tg_audio.py` —Å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `extract_audio_descriptor()`, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:

- **Voice —Å–æ–æ–±—â–µ–Ω–∏—è** - –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (.ogg)
- **Audio —Ñ–∞–π–ª—ã** - –º—É–∑—ã–∫–∞ –∏ –∞—É–¥–∏–æ –∑–∞–ø–∏—Å–∏ (.mp3, .wav, .m4a, .flac, etc.)
- **Video notes** - –∫—Ä—É–≥–ª—ã–µ –≤–∏–¥–µ–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –¥–æ—Ä–æ–∂–∫–∏)
- **Document —Å –∞—É–¥–∏–æ** - —Ñ–∞–π–ª—ã —Å MIME —Ç–∏–ø–æ–º `audio/*` –∏–ª–∏ –∞—É–¥–∏–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
- **–ü–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –≤—Å–µ –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –≤ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω–æ–º –≤–∏–¥–µ

### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- –§–æ–ª–±—ç–∫ –ø–æ–∏—Å–∫ –≤ `reply_to_message` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 3. –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ü–æ—à–∞–≥–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ö–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
1. **‚è≥ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞—É–¥–∏–æ...** - –Ω–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ñ–∞–π–ª–µ
2. **‚¨áÔ∏è –°–∫–∞—á–∏–≤–∞—é —Ñ–∞–π–ª...** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ Telegram
3. **üéõÔ∏è –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é –∞—É–¥–∏–æ...** - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
4. **üìù –ì–æ—Ç–æ–≤–ª—é —Å–∞–º–º–∞—Ä–∏...** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –∏–∑–ª–æ–∂–µ–Ω–∏—è

### 4. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- –ê—É–¥–∏–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º —Ç–∏–ø–∞–º
- –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π ‚Üí —É–∫–∞–∑–∞–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞
- –†–µ—á—å –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞ ‚Üí –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- –û—à–∏–±–∫–∏ API ‚Üí –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∂–µ

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

- `sanitize_filename()` - –æ—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –æ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- `is_audio_document()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `get_audio_info_text()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞—É–¥–∏–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `utils/tg_audio.py` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞–º–∏
- `tools/test_audio_increment.py` - —Ç–µ—Å—Ç—ã –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö
- `simple_bot.py` - –æ–±–Ω–æ–≤–ª–µ–Ω `handle_audio_message()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- `audio_processor.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `download_audio_by_file_id()` –∏ `convert_to_wav_16k_mono()`
- `replit.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
- **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞**: –≤—Å–µ —Ç–∏–ø—ã –∞—É–¥–∏–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–æ–≤ –∏–∑ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∞—É–¥–∏–æ —Å–æ–æ–±—â–µ–Ω–∏–π  
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π  
‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞—É–¥–∏–æ  
‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—É–¥–∏–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
‚úÖ –û—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤  

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚úÖ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π  
‚úÖ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏  

## Acceptance Criteria (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

- [x] –ü–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–π voice –∏–∑ –¥—Ä—É–≥–æ–≥–æ —á–∞—Ç–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –∏ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è
- [x] –ü–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–µ audio —Ñ–∞–π–ª—ã (.ogg/.mp3/.m4a/.wav/.flac) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [x] Video note (–∫—Ä—É–≥–ª—ã–µ –≤–∏–¥–µ–æ) —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è
- [x] –î–æ–∫—É–º–µ–Ω—Ç—ã —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞–º–∏ (mime=audio/* –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [x] –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–µ–¥–∏–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–µ–∂–ª–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π
- [x] –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç –±–æ—Ç–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
- [x] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [x] –î–≤—É—è–∑—ã—á–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è (RU/EN) —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø—Ä–µ–∂–¥–µ

## –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—É

–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ –≥–æ—Ç–æ–≤–∞. –°–ª–µ–¥—É—é—â–∏–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å:

1. **Free mode STT** - –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ faster-whisper
2. **VAD —á–∞–Ω–∫–æ–≤–∞–Ω–∏–µ** - —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö –∞—É–¥–∏–æ –Ω–∞ —á–∞—Å—Ç–∏
3. **–≠–∫—Å—Ç—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è** - —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API
4. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
**–î–∞—Ç–∞:** 19 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~2 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
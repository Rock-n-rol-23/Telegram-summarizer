# Исправление проблемы с нажатиями на inline кнопки

## Проблема
В Telegram боте не работают нажатия на inline кнопки для выбора процента сжатия (10%, 30%, 50%). Кнопки отображаются, но ничего не происходит при нажатии.

## Задача
Найди и исправь проблему с обработкой callback queries, НЕ НАРУШАЯ существующую функциональность бота.

## Что нужно проверить и исправить:

### 1. Проблемы с методом answer_callback_query
Проверь метод `answer_callback_query` - возможно проблема в том, как отправляются данные в Telegram API. Убедись что используется правильный формат данных.

### 2. Добавь детальное логирование callback queries
Добавь подробные логи в метод `handle_callback_query`:
- Логируй полученный callback_query целиком
- Логируй extracted data
- Логируй каждый этап обработки
- Логируй результаты API вызовов

### 3. Проверь обработку в основном цикле
Убедись что callback_query правильно передается в `handle_update` и что там нет блокирующих условий.

### 4. Исправь потенциальные проблемы с async/await
Проверь что все async вызовы правильно awaited и нет race conditions.

### 5. Проверь формат callback_data
Убедись что данные в кнопках соответствуют тому, что ожидается в коде:
- "compression_10", "compression_30", "compression_50"
- "format_bullets", "format_paragraph", "format_keywords"

## Важные требования:

⚠️ **НЕ МЕНЯЙ** основную логику бота - только исправляй callback handling
⚠️ **НЕ ЛОМАЙ** существующую обработку текстовых сообщений
⚠️ **ДОБАВЬ** подробное логирование для диагностики
⚠️ **ПРОТЕСТИРУЙ** что команды /start, /help, /stats продолжают работать

## Подход к решению:

1. **Сначала добавь детальное логирование** во все методы связанные с callback queries
2. **Проверь и исправь метод answer_callback_query** - убедись что response правильно отправляется
3. **Убедись что handle_callback_query вызывается** из handle_update
4. **Проверь что нет исключений** которые блокируют обработку
5. **Добавь error handling** в callback методы

## Ожидаемый результат:
После исправления при нажатии на кнопки 10%/30%/50% должно происходить:
1. Логирование получения callback
2. Успешное обновление сообщения 
3. Показ следующего меню выбора формата

Начни с добавления максимально подробного логирования, чтобы увидеть что именно происходит (или не происходит) при нажатии на кнопки.